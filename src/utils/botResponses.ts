
import { BotResponse } from '@/types/supportBot';

export const ENHANCED_RESPONSES = {
  greeting: {
    text: "–ü—Ä–∏–≤–µ—Ç! –Ø –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ EduGame. –ú–µ–Ω—è –∑–æ–≤—É—Ç –≠–¥–¥–∏, –∏ —è –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å –≤–∞–º —Å –ª—é–±—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏. –ö–∞–∫ –¥–µ–ª–∞ —Å –æ–±—É—á–µ–Ω–∏–µ–º?",
    intent: "greeting",
    followUp: ["–ü–æ–º–æ—â—å —Å –∫—É—Ä—Å–∞–º–∏", "–ü—Ä–æ–±–ª–µ–º—ã —Å –≤—Ö–æ–¥–æ–º", "–í–æ–ø—Ä–æ—Å—ã –æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è—Ö"]
  },
  login: {
    text: "–ü–æ–Ω—è–ª, –ø—Ä–æ–±–ª–µ–º—ã —Å –≤—Ö–æ–¥–æ–º –≤ —Å–∏—Å—Ç–µ–º—É. –í–æ—Ç —á—Ç–æ –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å:\n\n1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å email –∏ –ø–∞—Ä–æ–ª—è\n2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Caps Lock –≤—ã–∫–ª—é—á–µ–Ω\n3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å —á–µ—Ä–µ–∑ '–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?'\n4. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞\n\n–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è - —Å–æ–æ–±—â–∏—Ç–µ –º–Ω–µ!",
    intent: "login"
  },
  courses: {
    text: "–û—Ç–ª–∏—á–Ω–æ! –ü–æ –∫—É—Ä—Å–∞–º —è –º–æ–≥—É –ø–æ–º–æ—á—å —Å:\n\nüìö –ü–æ–∏—Å–∫–æ–º –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –∫—É—Ä—Å–∞\nüéØ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∞\nüìù –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∑–∞–¥–∞–Ω–∏–π\nüí° –ü–æ–Ω–∏–º–∞–Ω–∏–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª–∞\n\n–û —á–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å?",
    intent: "courses"
  },
  progress: {
    text: "–í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å - —ç—Ç–æ –≤–∞–∂–Ω–æ! –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:\n\n‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —É—Ä–æ–∫–∏\n‚≠ê –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –æ–ø—ã—Ç\nüèÜ –ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è\nüìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—É—á–µ–Ω–∏—è\n\n–í —Ä–∞–∑–¥–µ–ª–µ '–ü—Ä–æ–≥—Ä–µ—Å—Å' –≤—ã –Ω–∞–π–¥–µ—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É –≤–∞—à–µ–≥–æ –æ–±—É—á–µ–Ω–∏—è.",
    intent: "progress"
  },
  achievements: {
    text: "–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è - —ç—Ç–æ –≤–∞—à–∏ –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ —É—Å–ø–µ—Ö–∏! üèÜ\n\n–í—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –∏—Ö –∑–∞:\n‚Ä¢ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤\n‚Ä¢ –†–µ—à–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á\n‚Ä¢ –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ\n‚Ä¢ –ü–æ–º–æ—â—å –¥—Ä—É–≥–∏–º —Å—Ç—É–¥–µ–Ω—Ç–∞–º\n\n–ö–∞–∫–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –≤–∞—Å –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç?",
    intent: "achievements"
  },
  admin: {
    text: "–§—É–Ω–∫—Ü–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏. –ï—Å–ª–∏ –≤—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä, –Ω–æ –Ω–µ –≤–∏–¥–∏—Ç–µ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Å–∏—Å—Ç–µ–º–Ω–æ–º—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∞—à–∏—Ö –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞.",
    intent: "admin"
  },
  motivation: {
    text: "–ü–æ–Ω–∏–º–∞—é, —á—Ç–æ –∏–Ω–æ–≥–¥–∞ —Å–ª–æ–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –º–æ—Ç–∏–≤–∞—Ü–∏—é! üí™\n\n–í–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–≤–µ—Ç–æ–≤:\n‚Ä¢ –°—Ç–∞–≤—å—Ç–µ –Ω–µ–±–æ–ª—å—à–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Ü–µ–ª–∏\n‚Ä¢ –û—Ç–º–µ—á–∞–π—Ç–µ —Å–≤–æ–∏ —É—Å–ø–µ—Ö–∏\n‚Ä¢ –ò–∑—É—á–∞–π—Ç–µ —Å –¥—Ä—É–∑—å—è–º–∏\n‚Ä¢ –ü–æ–º–Ω–∏—Ç–µ –æ —Å–≤–æ–∏—Ö —Ü–µ–ª—è—Ö\n\n–í—ã —É–∂–µ —Å–¥–µ–ª–∞–ª–∏ –ø–µ—Ä–≤—ã–π —à–∞–≥, –Ω–∞—á–∞–≤ –æ–±—É—á–µ–Ω–∏–µ!",
    intent: "motivation"
  },
  technical: {
    text: "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–ª—É—á–∞—é—Ç—Å—è! üîß\n\n–ß–∞—Å—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç:\n‚Ä¢ –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)\n‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ\n‚Ä¢ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –±—Ä–∞—É–∑–µ—Ä\n‚Ä¢ –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à\n\n–û–ø–∏—à–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?",
    intent: "technical"
  },
  default: {
    text: "–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–æ–ø—Ä–æ—Å! –Ø —Å—Ç–∞—Ä–∞—é—Å—å —Å—Ç–∞—Ç—å —É–º–Ω–µ–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å. ü§ñ\n\n–ï—Å–ª–∏ –º–æ–π –æ—Ç–≤–µ—Ç –Ω–µ –ø–æ–º–æ–≥, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:\n‚Ä¢ –ü–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å\n‚Ä¢ –ë—ã—Ç—å –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º\n‚Ä¢ –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É\n\n–Ø –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å!",
    intent: "default"
  }
};

export const analyzeIntent = (message: string, userName?: string): BotResponse => {
  const lowerMessage = message.toLowerCase();
  
  // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ
  if (lowerMessage.includes('–ø—Ä–∏–≤–µ—Ç') || lowerMessage.includes('hello') || 
      lowerMessage.includes('–ø–æ–º–æ—â—å') || lowerMessage.includes('–Ω–∞—á–∞—Ç—å')) {
    const response = { ...ENHANCED_RESPONSES.greeting };
    if (userName) {
      response.text = `–ü—Ä–∏–≤–µ—Ç, ${userName}! ` + response.text.substring(8);
    }
    return response;
  }
  
  // –ü—Ä–æ–±–ª–µ–º—ã —Å –≤—Ö–æ–¥–æ–º
  if (lowerMessage.includes('–≤—Ö–æ–¥') || lowerMessage.includes('–ª–æ–≥–∏–Ω') || 
      lowerMessage.includes('–ø–∞—Ä–æ–ª—å') || lowerMessage.includes('–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü')) {
    return ENHANCED_RESPONSES.login;
  }
  
  // –í–æ–ø—Ä–æ—Å—ã –æ –∫—É—Ä—Å–∞—Ö
  if (lowerMessage.includes('–∫—É—Ä—Å') || lowerMessage.includes('—É—Ä–æ–∫') || 
      lowerMessage.includes('–æ–±—É—á–µ–Ω–∏') || lowerMessage.includes('–∏–∑—É—á–∞')) {
    return ENHANCED_RESPONSES.courses;
  }
  
  // –ü—Ä–æ–≥—Ä–µ—Å—Å –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  if (lowerMessage.includes('–ø—Ä–æ–≥—Ä–µ—Å—Å') || lowerMessage.includes('—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞') || 
      lowerMessage.includes('—Ä–µ–∑—É–ª—å—Ç–∞—Ç') || lowerMessage.includes('—É—Å–ø–µ')) {
    return ENHANCED_RESPONSES.progress;
  }
  
  // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
  if (lowerMessage.includes('–¥–æ—Å—Ç–∏–∂–µ–Ω–∏') || lowerMessage.includes('–Ω–∞–≥—Ä–∞–¥') || 
      lowerMessage.includes('–æ—á–∫–∏') || lowerMessage.includes('–æ–ø—ã—Ç')) {
    return ENHANCED_RESPONSES.achievements;
  }
  
  // –ú–æ—Ç–∏–≤–∞—Ü–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞
  if (lowerMessage.includes('–º–æ—Ç–∏–≤–∞—Ü') || lowerMessage.includes('—Ç—Ä—É–¥–Ω–æ') || 
      lowerMessage.includes('—Å–ª–æ–∂–Ω–æ') || lowerMessage.includes('–Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è') ||
      lowerMessage.includes('—É—Å—Ç–∞–ª') || lowerMessage.includes('—Å–∫—É—á–Ω–æ')) {
    return ENHANCED_RESPONSES.motivation;
  }
  
  // –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
  if (lowerMessage.includes('–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç') || lowerMessage.includes('–æ—à–∏–±–∫–∞') || 
      lowerMessage.includes('–±–∞–≥') || lowerMessage.includes('–≥–ª—é–∫') ||
      lowerMessage.includes('—Ç–æ—Ä–º–æ–∑–∏—Ç') || lowerMessage.includes('–∑–∞–≤–∏—Å–∞–µ—Ç')) {
    return ENHANCED_RESPONSES.technical;
  }
  
  // –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
  if (lowerMessage.includes('–∞–¥–º–∏–Ω') || lowerMessage.includes('–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä') ||
      lowerMessage.includes('–ø—Ä–∞–≤–∞') || lowerMessage.includes('–¥–æ—Å—Ç—É–ø')) {
    return ENHANCED_RESPONSES.admin;
  }
  
  return ENHANCED_RESPONSES.default;
};
